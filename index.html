<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Rohlík.cz – Test z češtiny (A1)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --rohlik:#f6a623; --bg:#f4f4f4; }
    body { margin:0; font-family:Arial,sans-serif; background:var(--bg); }

    /* login overlay */
    #loginScreen {
      position:fixed; inset:0;
      background:linear-gradient(140deg, #fff6e6 0%, #ffffff 55%, #ffe1aa 100%);
      display:flex; align-items:center; justify-content:center;
      z-index:9999;
    }
    .login-box {
      background:#fff; border:1px solid #f0d09f; border-radius:14px;
      padding:26px 26px 20px; width: min(420px, 90%);
      box-shadow:0 10px 40px rgba(0,0,0,0.08);
      text-align:center;
    }
    .login-logo { height:50px; margin-bottom:12px; }
    .login-title { font-size:18px; font-weight:bold; margin-bottom:6px; }
    .login-sub { color:#666; font-size:13px; margin-bottom:16px; }
    .login-input {
      width:100%; padding:8px 10px; border:1px solid #ddd; border-radius:8px;
      font-size:14px; margin-bottom:12px;
    }
    .login-btn {
      width:100%; background:var(--rohlik); border:none; color:#fff; font-weight:bold;
      border-radius:8px; padding:9px 0; cursor:pointer; font-size:14px;
    }
    .login-error { color:#c62828; font-size:12px; min-height:16px; margin-top:6px; }

    header { background:#fff; border-bottom:1px solid #e6e6e6; display:flex; align-items:center; justify-content:space-between; padding:10px 20px; gap:20px; position:sticky; top:0; z-index:10; }
    .brand { display:flex; align-items:center; gap:10px; }
    .brand img { height:40px; }
    .title-block small { color:#777; }
    .timer { display:flex; align-items:center; gap:8px; }
    .timer-time { background:#fff1dd; border-radius:999px; padding:6px 14px; font-weight:bold; color:#5a4500; }
    .timer button { background:var(--rohlik); border:none; color:#fff; border-radius:999px; width:34px; height:34px; font-weight:bold; cursor:pointer; }
    .progress-wrap { width:100%; background:#eee; height:6px; margin-top:6px; border-radius:999px; overflow:hidden; }
    .progress-bar { width:0%; height:6px; background:var(--rohlik); transition:width .2s; }
    .wrap { max-width:1200px; margin:20px auto; padding:0 20px; display:flex; gap:20px; }
    .left { flex:1 1 60%; }
    .question-box { background:#fff; border:1px solid #e1e1e1; border-radius:10px; margin-bottom:14px; padding:12px 14px 6px; cursor:pointer; transition:box-shadow .15s,border .15s; }
    .question-box:hover { box-shadow:0 3px 10px rgba(0,0,0,0.04); }
    .question-box.active { border:1px solid var(--rohlik); background:#fffdf7; }
    .question-title { font-weight:bold; margin-bottom:6px; color:#333; }
    .answers label { display:block; margin-bottom:5px; cursor:pointer; }
    .actions { max-width:1200px; margin:0 auto; padding:10px 20px 20px; display:flex; gap:12px; flex-wrap:wrap; }
    .primary-btn { background:var(--rohlik); border:none; color:#fff; border-radius:8px; padding:9px 18px; cursor:pointer; font-weight:bold; }
    #result { margin-top:12px; font-weight:bold; }
    #details { margin:0 20px 20px; background:#fff; border:1px solid #eee; border-radius:8px; padding:10px; display:none; max-width:1200px; }
    #details h4 { margin-top:0; }
    .text-panel { position:fixed; right:20px; top:90px; width:320px; background:#fff; border:1px solid #ddd; border-radius:10px; padding:12px; box-shadow:0 3px 10px rgba(0,0,0,0.05); min-height:140px; }
    .text-panel h3 { margin:0 0 6px 0; font-size:15px; }
    .text-panel small { color:#888; }
    @media (max-width:1100px){ .text-panel{position:static;width:auto;margin:0 20px 20px;} .wrap{flex-direction:column;} }
  </style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="loginScreen">
  <div class="login-box">
    <img src="rohlik-logo.png" alt="Rohlík.cz" class="login-logo" onerror="this.style.display='none'">
    <div class="login-title">Přístup k testu</div>
    <div class="login-sub">Zadejte heslo, které jste dostali od koordinátora.</div>
    <input id="loginInput" type="password" class="login-input" placeholder="Heslo" autocomplete="off" />
    <button id="loginBtn" class="login-btn">Pokračovat</button>
    <div id="loginError" class="login-error"></div>
  </div>
</div>

<!-- HLAVNÍ APLIKACE -->
<header id="appHeader" style="display:none;">
  <div>
    <div class="brand">
      <img src="rohlik-logo.png" alt="Rohlík.cz" onerror="this.style.display='none'">
      <div class="title-block">
        <div><strong>Rohlík.cz – Test z češtiny (A1)</strong></div>
        <small id="answeredInfo">Zodpovězeno 0 / 25</small>
      </div>
    </div>
    <div class="progress-wrap"><div class="progress-bar" id="progressBar"></div></div>
  </div>
  <div class="timer">
    <span id="timer" class="timer-time">30:00</span>
    <button id="pauseBtn">II</button>
  </div>
</header>

<div class="wrap" id="appWrap" style="display:none;">
  <div class="left" id="questions"></div>
</div>

<div class="text-panel" id="textPanel" style="display:none;">
  <h3>Text k otázce</h3>
  <small>Klikni na otázku vlevo</small>
  <div id="textBox" style="white-space:pre-line; margin-top:6px;"></div>
</div>

<div class="actions" id="appActions" style="display:none;">
  <button id="checkBtn" class="primary-btn">Vyhodnotit test</button>
  <div id="result"></div>
</div>
<div id="details"></div>

<script>
  const PASSWORD = "rohlik2025";

  const loginScreen = document.getElementById("loginScreen");
  const loginInput = document.getElementById("loginInput");
  const loginBtn = document.getElementById("loginBtn");
  const loginError = document.getElementById("loginError");

  function unlockApp() {
    const v = loginInput.value.trim();
    if (v === PASSWORD) {
      loginScreen.style.display = "none";
      document.getElementById("appHeader").style.display = "";
      document.getElementById("appWrap").style.display = "";
      document.getElementById("textPanel").style.display = "";
      document.getElementById("appActions").style.display = "";
    } else {
      loginError.textContent = "Nesprávné heslo.";
    }
  }

  loginBtn.addEventListener("click", unlockApp);
  loginInput.addEventListener("keydown", e => { if (e.key === "Enter") unlockApp(); });

  const QUESTION_BANK = [
    {question:"Kdo má narozeniny?",text:"Milá Jano,\n\nzvu Tě na oslavu svých narozenin. Party bude v sobotu 7. 6. od 19:30 u mě doma. Bude tam hodně jídla a přijde i můj bratr Jakub. Zvířata na party nesmí.\n\nTěším se na Tebe.\nTvůj Tomáš",answers:["Jana","Jakub","Tomáš","Kamarád"],correct:"Tomáš"},
    {question:"Kdy bude party?",text:"Milá Jano,\n\nzvu Tě na oslavu svých narozenin. Party bude v sobotu 7. 6. od 19:30 u mě doma.",answers:["V pátek 6. 6.","V sobotu 7. 6.","V neděli 8. 6.","Ve středu 7. 6."],correct:"V sobotu 7. 6."},
    {question:"Kdo nesmí na party?",text:"Bude tam hodně jídla a přijde i můj bratr Jakub. Zvířata na party nesmí.",answers:["Děti","Zvířata","Bratr","Kamarádi"],correct:"Zvířata"},
    {question:"Jak se Tomáš podepsal?",text:"… Těším se na Tebe.\nTvůj Tomáš",answers:["Tvůj Tomáš","S pozdravem Jana","Ahoj Jakube","S láskou maminka"],correct:"Tvůj Tomáš"},
    {question:"Co znamená „Zítra nepřijdu.“?",answers:["Zítra přijdu pozdě.","Zítra vůbec nepřijdu.","Zítra přijdu dřív.","Zítra budu doma."],correct:"Zítra vůbec nepřijdu."},
    {question:"Toto je můj ____.",answers:["kamarád","kamarádka","dcera","sestra"],correct:"kamarád"},
    {question:"Toto je moje ____.",answers:["bratr","kamarádka","syn","děda"],correct:"kamarádka"},
    {question:"Já ____ z Česka.",answers:["jsem","jsi","je","jste"],correct:"jsem"},
    {question:"Ona ____ učitelka.",answers:["je","jsem","jsi","jsme"],correct:"je"},
    {question:"„Kolik je hodin?“ znamená:",answers:["Chci vědět čas.","Jak se jmenuješ?","Jaký je den?","Kde bydlíš?"],correct:"Chci vědět čas."},
    {question:"Kde bydlíš?",answers:["Bydlím v Praze.","Mám 25 let.","Jsem učitel.","Mám se dobře."],correct:"Bydlím v Praze."},
    {question:"Která věta je správně?",answers:["Já jsem student.","Já být student.","Já jsi student.","Student já jsem."],correct:"Já jsem student."},
    {question:"V kolik hodin _______ do práce?",answers:["chodíš","chodím","chodí","chodit"],correct:"chodíš"},
    {question:"„Dáte si kávu?“ správná odpověď:",answers:["Ano, děkuji.","Je pondělí.","Bydlím v Brně.","Jsem Petr."],correct:"Ano, děkuji."},
    {question:"Které slovo je jídlo?",answers:["chléb","auto","židle","kniha"],correct:"chléb"},
    {question:"„Je mi 30 let.“ znamená:",answers:["I am 30 years old.","I am from Prague.","I work here.","I am a driver."],correct:"I am 30 years old."},
    {question:"Dnes je pondělí, zítra je …",answers:["úterý","sobota","neděle","pátek"],correct:"úterý"},
    {question:"Jakou barvu má tráva?",answers:["zelenou","modrou","černou","bílou"],correct:"zelenou"},
    {question:"„Odkud jste?“",answers:["Jsem z Ukrajiny.","Je mi dobře.","Je pondělí.","Bydlím z práce."],correct:"Jsem z Ukrajiny."},
    {question:"„Máte děti?“ znamená:",answers:["Zda máte syna nebo dceru.","Kde bydlíte?","Kolik je hodin?","Kde pracujete?"],correct:"Zda máte syna nebo dceru."},
    {question:"„Ještě jednou, prosím.“ znamená:",answers:["Řekněte to znovu.","Zaplaťte za mě.","Domů, prosím.","Dám si kávu."],correct:"Řekněte to znovu."},
    {question:"„Kde je toaleta?“ – správná odpověď:",answers:["Je vpravo.","Je pondělí.","Jsem Petr.","Bydlím v Praze."],correct:"Je vpravo."}
  ];

  const QUESTIONS_PER_TEST = 25;
  const MIN_SCORE = 20;

  function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}}

  const all = [...QUESTION_BANK];
  shuffle(all);
  const selected = all.slice(0, QUESTIONS_PER_TEST);

  const questionsDiv = document.getElementById("questions");
  const textBox = document.getElementById("textBox");
  const answeredInfo = document.getElementById("answeredInfo");
  const progressBar = document.getElementById("progressBar");

  function updateAnswered() {
    let answered = 0;
    selected.forEach((q, i) => {
      const chosen = document.querySelector('input[name="q'+i+'"]:checked');
      if (chosen) answered++;
    });
    answeredInfo.textContent = "Zodpovězeno " + answered + " / " + QUESTIONS_PER_TEST;
    progressBar.style.width = (answered / QUESTIONS_PER_TEST * 100) + "%";
  }

  selected.forEach((q, index) => {
    const answers = [...q.answers];
    shuffle(answers);
    const box = document.createElement("div");
    box.className = "question-box";
    const title = document.createElement("div");
    title.className = "question-title";
    title.textContent = "Otázka " + (index+1) + " z " + QUESTIONS_PER_TEST + ": " + q.question;
    box.appendChild(title);
    const answersDiv = document.createElement("div");
    answers.forEach(ans => {
      const id = "q"+index+"_"+ans;
      const label = document.createElement("label");
      label.setAttribute("for", id);
      label.innerHTML = '<input type="radio" name="q'+index+'" id="'+id+'" value="'+ans+'"> '+ans;
      answersDiv.appendChild(label);
    });
    box.appendChild(answersDiv);
    questionsDiv.appendChild(box);

    box.addEventListener("click", () => {
      document.querySelectorAll(".question-box").forEach(b => b.classList.remove("active"));
      box.classList.add("active");
      textBox.textContent = q.text ? q.text : "Tato otázka nemá text.";
    });

    box.addEventListener("change", updateAnswered);
  });

  function evaluate() {
    let score = 0;
    let wrong = [];
    selected.forEach((q, index) => {
      const chosen = document.querySelector('input[name="q'+index+'"]:checked');
      if (chosen && chosen.value === q.correct) {
        score++;
      } else {
        wrong.push({i:index+1, q:q.question, c:q.correct});
      }
    });
    const result = document.getElementById("result");
    const percent = Math.round(score / QUESTIONS_PER_TEST * 100);
    if (score >= MIN_SCORE) {
      result.textContent = "Výsledek: " + score + "/" + QUESTIONS_PER_TEST + " (" + percent + " %) – PROŠEL(A).";
      result.style.color = "green";
    } else {
      result.textContent = "Výsledek: " + score + "/" + QUESTIONS_PER_TEST + " (" + percent + " %) – NEPROŠEL(A). Potřebujete alespoň " + MIN_SCORE + " bodů.";
      result.style.color = "red";
    }
    const details = document.getElementById("details");
    if (wrong.length) {
      let html = "<h4>Nesprávné / nezodpovězené otázky:</h4><ul>";
      wrong.forEach(w => { html += "<li>Otázka " + w.i + ": " + w.q + " – správně: <strong>" + w.c + "</strong></li>"; });
      html += "</ul>";
      details.innerHTML = html;
      details.style.display = "block";
    } else {
      details.style.display = "none";
    }
    evaluated = true;
  }

  document.getElementById("checkBtn").addEventListener("click", evaluate);

  let timeLeft = 30 * 60;
  let paused = false;
  let evaluated = false;
  const timerEl = document.getElementById("timer");
  const pauseBtn = document.getElementById("pauseBtn");

  function updateTimer() {
    if (!paused && !evaluated) {
      timeLeft--;
      if (timeLeft <= 0) {
        timeLeft = 0;
        if (!evaluated) evaluate();
      }
    }
    const m = Math.floor(timeLeft / 60);
    const s = timeLeft % 60;
    timerEl.textContent = (m<10?"0"+m:m) + ":" + (s<10?"0"+s:s);
  }
  setInterval(updateTimer, 1000);

  pauseBtn.addEventListener("click", () => {
    paused = !paused;
    pauseBtn.textContent = paused ? "▶" : "II";
  });
</script>

</body>
</html>